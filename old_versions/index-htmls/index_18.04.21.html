<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Init server -->
  <script type="text/javascript" src='frontend/js/server/server_api.js'>
  </script>
  <script type="text/javascript" src='frontend/js/server/init_server.js'>
  </script>
  <!-- Init client -->
  <script type="text/javascript" src='frontend/js/client/init_client.js'>
  </script>
  <!-- Client logics -->
  <script type="text/javascript" src='frontend/js/client/logics/echo_on_ready.js'>
  </script>
  <script type="text/javascript" src='frontend/js/client/logics/echo_input.js'>
  </script>
  <!-- Server logics -->
  <script type="text/javascript" src='frontend/js/server/logics/handle_server_update_event.js'>
  </script>
  <script type="text/javascript" src='frontend/js/server/logics/set_image_from_server.js'>
  </script>


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
  <script type="text/javascript" src="frontend/js/jQuery/jquery.imgareaselect-0.9.10/scripts/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <link rel="stylesheet" type="text/css" href="frontend/js/jQuery/jquery.imgareaselect-0.9.10/css/imgareaselect-default.css" />
  <script type="text/javascript" src="frontend/js/jQuery/jquery.imgareaselect-0.9.10/scripts/jquery.imgareaselect.pack.js"></script>
  <script type="text/javascript" src="frontend/js/jQuery/blockUI/jquery.blockUI.js"></script>

  <link href="frontend/js/jQuery/Stepper-master/jquery.fs.stepper.css" rel="stylesheet" type="text/css" media="all" />
  <script src="frontend/js/jQuery/Stepper-master/jquery.fs.stepper.js"></script>

  <!-- <link rel="stylesheet" href="frontend/js/jQuery/Custom-Number-InputSpinner-Plugin-jQuery-number/number.css">
  <script src="frontend/js/jQuery/Custom-Number-InputSpinner-Plugin-jQuery-number/number.js"></script> -->

  <style type="text/css">
    .img-responsive {
      width: 100%;
    }
    .col-full-h {
      height: 100vh;
    }
    .col-sm-1 {
      background-color: grey;
    }
    .col-sm-7 {
      background-color: lightgreen;
    }
    .col-sm-4 {
      background-color: lightblue;
    }
    .col-sm-6 {

    }
    .btn-toolbar{
      margin-top: 8px;
    }
    .almost-fill{
      width: 95%
    }
    .responsive-width {
      font-size: 3vw;
    }
    @media (max-width: 768px) {
      .btn-responsive {
        padding:2px 4px;
        font-size:60%;
        line-height: 1;
        border-radius:3px;
      }
    }

    @media (min-width: 769px) and (max-width: 992px) {
      .btn-responsive {
        padding:4px 9px;
        font-size:70%;
        line-height: 1.2;
      }
    }
    .btn-text {
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .top-buffer { margin-top:20px; }

  </style>

</head>
<body>

  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-1 col-full-h">col-sm-2
        <button style="width: 40px; height: 30px; display: block;">Basic</button>
        <button style="width: 40px; height: 30px; display: block;">G</button>
        
        <a name="asdf" class="btn btn-sm btn-primary btn-block" style="margin-bottom:4px;white-space: normal; font-size: 80%;">График ЦФ</a>
        <a class="btn btn-sm btn-info btn-block btn-text" style="margin-bottom:4px;white-space: normal; font-size: 80%;">Загрузить NN</a>
        
      </div>
      <div class="col-sm-7 col-full-h">
        col-sm-8
        <div>
          <!-- <img id="chen" src='frontend/images/Chen.jpg' class="img-responsive"></img> -->
          <img id="chen" src='' class="img-responsive"></img>
        </div>
        <div>
          <img id="chen_2" src='' class="img-responsive"></img>
        </div>
        <div>
          <canvas id="chen_3" src='' class="img-responsive"></canvas>
        </div>
        <div class="row"> 
          <div class="col-sm-6"> 
            asdf
          </div>
          <div class="col-sm-6"> 
            fdsa
          </div>
        </div>
      </div>
      <div class="col-sm-4 col-full-h">
        col-sm-3
        <div class="btn-toolbar justify" role="toolbar" aria-label="Toolbar with button groups">
          <button type="button" class="btn" style="width: 30%">8</button>
          <button type="button" class="btn" style="width: 30%">8</button>
          <button type="button" class="btn" style="width: 30%">8</button>
        </div>

        <div class="btn-toolbar justify" role="toolbar" aria-label="Toolbar with button groups">
          <button type="button" class="btn" style="width: 30%">8</button>
          <button type="button" class="btn" style="width: 30%">8</button>
          <button type="button" class="btn" style="width: 30%">8</button>
        </div>

        <div class="row top-buffer"> 
          <div class="col-sm-4 top-buffer"> 
            <button type="button" class="btn btn-block" style="">8</button>
          </div>
          <div class="col-sm-4 top-buffer"> 
            <input id="file_input" type="file" style="display: none" />
            <button id="file_input_button" type="button" class="btn btn-block" style="">Select file</button>

            <script>
                $("#file_input_button").on("click", function() {
                    $("#file_input").trigger("click");
                });
                $("#file_input").change(function(){
                    alert(document.getElementById("file_input").files[0].path);
                 });
            </script>
          </div>
          <div class="col-sm-4 top-buffer"> 
            <button type="button" class="btn btn-block" style="">8</button>
          </div>
        </div>

        <div class="row top-buffer">
          <div class="col-sm-6">
            <button type="button" class="btn btn-sm btn-block" style="height: 60px !important">8</button>
          </div>
          <div class="col-sm-6">
            <input id="number_1" type="number" name="number" class="btn-block" style="height: 30px;" value="">
            <!-- <input type="number" name="number" step="0.1"> -->
          </div>
        </div>

      </div>
    </div>
  </div>

  <script type="text/javascript">
    $(document).ready(function () {

      $('#chen').imgAreaSelect({

        handles: true,

        onSelectEnd: function (img, selection) {

          if (selection.width == 0 || selection.height == 0)
            alert('x: ' + selection.x1 + '; y: ' + selection.y1);
          else
            alert('width: ' + selection.width + '; height: ' + selection.height);
        }
      });

      // Properties
      $("#number_1").attr({ step: 0.1 });

      // $("#number_1").change(function(){ alert($("#number_1").val())});
      // Onchange
      $( "#number_1" ).change(function() {
        alert( $( "#number_1" ).val() );
      });

      // var imgElem_0 = document.getElementById('chen');
      // //$('#chen_2').attr('src', 'frontend/images/Pic.png');
      // var imgData = JSON.stringify(getBase64Image(imgElem_0));
      // console.log(imgData);
      // document.getElementById("chen_2").src = imgData;
      
      });

    //   $("button").click(function(){
    //     alert('asdf');
    //     //alert("Value: " + $("#number_1").val());
    //   });
    // });

    // // Onclick
    // $("button").click(function(){
    //     $("#number_1").val(1.0)
    //     alert("Value: " + $("#number_1").val());
    //   });

    // var imgElem_0 = document.getElementById('chen');
    // //$('#chen_2').attr('src', 'frontend/images/Pic.png');
    // var imgData = JSON.stringify(getBase64Image(imgElem_0));
    // console.log(imgData);


    // document.getElementById("chen_2").src = 'frontend/images/Chen.jpg';

    // document.getElementById("chen_2").src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";
    // document.getElementById("chen_2").src = "data:image/png;base64,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";

    // client.invoke("echo", imgData, (error, rep) => {
    //   if(error) {
    //     console.error(error)
    //   } else {
    //     var image = new Image();
    //     image.src = rep;
    //     document.body.appendChild(image);
    //   }
    // })

    function getBase64Image(imgElem) {
      // imgElem must be on the same server otherwise a cross-origin error will be thrown "SECURITY_ERR: DOM Exception 18"
      var canvas = document.createElement("canvas");
      canvas.width = imgElem.clientWidth;
      canvas.height = imgElem.clientHeight;
      var ctx = canvas.getContext("2d");
      ctx.drawImage(imgElem, 0, 0);
      var dataURL = canvas.toDataURL("image/png");
      return dataURL
      //return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
    }

    // client.invoke("get_chen_image", null, (error, rep) => {
    //   if(error) {
    //     console.error(error)
    //   } else {
    //     // console.log(rep.toString());
    //     // document.getElementById("chen_2").src = rep.toString();
    //     // var image = new Image();
    //     document.getElementById("chen").src = 'data:image/png;base64,'+rep.toString();
    //     // document.body.appendChild(image);
    //   }
    // })


    // $("input[type='number']").number({
    //   step: 0.1
    // });

    // var obj = {data:'Chen', time: '134'};
    // var str = JSON.stringify(obj);
    // var obj = JSON.parse(str);
    // alert(obj.data);

    // var img = document.getElementById('chen');
    // var dataURL = img.toDataURL();
    // console.log(dataURL);
    // $("#chen_2").attr("src", img.src);

    // client.invoke("echo", img, (error, rep) => {
    //   if(error) {
    //     console.error(error)
    //   } else {
    //     alert(document.getElementById('chen_2') = img);
    //   }
    // })

  </script>

</body>
</html>